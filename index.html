<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://developer.eitaa.com/eitaa-web-app.js"></script>
<title>منوی بازی‌ها</title>
<style>
:root{
  --card-bg:#fff;
  --page-bg:#f0f2f5;
  --accent:#2b6cb0;
  --text:#222;
}
*{box-sizing:border-box;}
body{
  margin:0;
  font-family:"Segoe UI", Tahoma, Arial, sans-serif;
  background:var(--page-bg);
  color:var(--text);
  overflow-x:hidden;
}
.container{max-width:1200px;margin:0 auto;padding:20px;}
header{text-align:center;margin-bottom:18px;}
h1#pagetitle{margin:6px 0 0 0;font-size:28px; transition: color .3s;}
p{margin:6px 0 12px 0;font-size:16px;}
.menu{display:flex;gap:18px;justify-content:center;flex-wrap:wrap;perspective:1000px;}
.card{
  width:180px;
  background:linear-gradient(145deg,#fff,#e6e9f0);
  border-radius:20px;
  box-shadow:0 4px 12px rgba(0,0,0,0.06), 0 12px 24px rgba(0,0,0,0.1);
  overflow:hidden;
  text-decoration:none;
  color:inherit;
  cursor:pointer;
  transition: transform .35s ease, box-shadow .35s ease, background .5s;
  display:flex;
  flex-direction:column;
  align-items:center;
  padding:12px;
  opacity:0;
  transform: translateY(30px);
  background-size:200% 200%;
  animation: gradientShift 6s ease infinite;
}
@keyframes gradientShift{
  0%{background-position:0% 50%;}
  50%{background-position:100% 50%;}
  100%{background-position:0% 50%;}
}
.card.show{opacity:1; transform:translateY(0);}
.card:active{transform:scale(.975);}
.card:hover{
  transform:translateY(-6px) rotateX(3deg) rotateY(3deg) scale(1.05);
  box-shadow:0 16px 32px rgba(0,0,0,0.2);
  background:linear-gradient(145deg,#f9f9f9,#dfe3ed);
}
.image-box{
  width:100%;
  height:130px;
  border-radius:12px;
  display:flex;
  align-items:center;
  justify-content:center;
  text-align:center;
  padding:6px;
  overflow:hidden;
}
.label{font-weight:600;font-size:18px;margin-top:6px;}
.page{display:none;}
.active{display:block;}
.iframe-wrap{width:100%;height:70vh;border-radius:12px;overflow:hidden;background:#fff;box-shadow:0 6px 18px rgba(0,0,0,0.06);position:relative;}
.back{display:inline-block;margin:12px 6px 30px 6px;padding:8px 14px;border-radius:10px;background:var(--accent);color:#fff;text-decoration:none;font-weight:600;cursor:pointer;}
.fullscreen-btn{display:inline-block;margin:12px 0 20px 0;background:var(--accent);color:#fff;border:none;padding:8px 14px;border-radius:6px;cursor:pointer; font-weight:600;}
@media(max-width:600px){.card{width:46%;}}
#splash{
  position:fixed;
  top:0; left:0;
  width:100%; height:100%;
  background:linear-gradient(135deg,#fdfbfb,#ebedee);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:9999;
  opacity:1;
}
#splash.hidden{opacity:0; pointer-events:none; transition:opacity 0.8s ease;}
.logo-container {display:flex; align-items:center; font-size:72px; font-weight:bold;}
.icon-box {display:flex; justify-content:center; align-items:center; width:100px; height:100px; border:8px solid #007bff; border-radius:20px; margin-left:15px; color:#007bff; animation: bounce 1.2s infinite alternate;}
@keyframes bounce{0% {transform:scale(1) translateY(0);} 50% {transform:scale(1.1) translateY(-12px);} 100% {transform:scale(1) translateY(0);}}
.text-arvin{color:#102341; letter-spacing:2px; text-shadow:0 2px 6px rgba(0,0,0,0.2);}
.card#card1 .cell{transition: transform 0.3s, box-shadow 0.3s, background 0.3s;}
.card#card1:hover .cell{transform: scale(1.1); box-shadow: 0 4px 8px rgba(0,0,0,0.2); filter: brightness(1.1);}
.card#card2:hover svg{transform: scale(1.05) rotate(-2deg); transition: transform 0.3s;}
.card#card2 svg{transition: transform 0.3s;}
</style>
</head>
<body>

<div id="splash">
  <div class="logo-container">
    <div class="icon-box">&lt;/&gt;</div>
    <div class="text-arvin">ARVIN</div>
  </div>
</div>

<div class="container">
<header>
  <h1 id="pagetitle">منوی بازی‌ها</h1>
  <p>روی کارت بازی موردنظر کلیک کنید</p>
</header>

<div id="menu" class="active page">
  <div class="menu">
    <!-- کارت دوز -->
    <div class="card" id="card1" onclick="window.open('https://eitaa.com/store_app/app?startapp=app_126&btn=مرکز.برنامک.های.ایتا','_blank')">
      <div class="image-box">
        <div class="board" style="display:grid; grid-template-columns:repeat(3,50px); grid-template-rows:repeat(3,50px); gap:5px; background:#c79a5d; padding:8px; border-radius:8px; box-shadow:0 0 5px #6a4b2c; transform:scale(0.85);">
          <div class="cell o" style="background:#e2b574;border-radius:5px;display:flex;justify-content:center;align-items:center;font-size:20px;font-weight:bold;color:#1da3dd;text-shadow:1px 1px 2px #0b5f8a">O</div>
          <div class="cell x" style="background:#e2b574;border-radius:5px;display:flex;justify-content:center;align-items:center;font-size:20px;font-weight:bold;color:#e63737;text-shadow:1px 1px 2px #742020">X</div>
          <div class="cell x" style="background:#e2b574;border-radius:5px;display:flex;justify-content:center;align-items:center;font-size:20px;font-weight:bold;color:#e63737;text-shadow:1px 1px 2px #742020">X</div>
          <div class="cell x" style="background:#e2b574;border-radius:5px;display:flex;justify-content:center;align-items:center;font-size:20px;font-weight:bold;color:#e63737;text-shadow:1px 1px 2px #742020">X</div>
          <div class="cell o" style="background:#e2b574;border-radius:5px;display:flex;justify-content:center;align-items:center;font-size:20px;font-weight:bold;color:#1da3dd;text-shadow:1px 1px 2px #0b5f8a">O</div>
          <div class="cell o" style="background:#e2b574;border-radius:5px;display:flex;justify-content:center;align-items:center;font-size:20px;font-weight:bold;color:#1da3dd;text-shadow:1px 1px 2px #0b5f8a">O</div>
          <div class="cell o" style="background:#e2b574;border-radius:5px;display:flex;justify-content:center;align-items:center;font-size:20px;font-weight:bold;color:#1da3dd;text-shadow:1px 1px 2px #0b5f8a">O</div>
          <div class="cell x" style="background:#e2b574;border-radius:5px;display:flex;justify-content:center;align-items:center;font-size:20px;font-weight:bold;color:#e63737;text-shadow:1px 1px 2px #742020">X</div>
          <div class="cell x" style="background:#e2b574;border-radius:5px;display:flex;justify-content:center;align-items:center;font-size:20px;font-weight:bold;color:#e63737;text-shadow:1px 1px 2px #742020">X</div>
        </div>
      </div>
      <div class="label">دوز</div>
    </div>

    <!-- کارت 2048 -->
    <div class="card" id="card2" onclick="handle2048()">
      <div class="image-box" style="padding:0;">
        <svg width="100%" height="130px" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
          <defs>
            <linearGradient id="grad" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" style="stop-color:#f9d342;stop-opacity:1"/>
              <stop offset="100%" style="stop-color:#f7c948;stop-opacity:1"/>
            </linearGradient>
          </defs>
          <rect x="0" y="0" width="200" height="200" rx="25" ry="25" fill="url(#grad)"/>
          <text x="50%" y="55%" dominant-baseline="middle" text-anchor="middle" font-family="Arial, sans-serif" font-size="64" font-weight="bold" fill="white">2048</text>
        </svg>
      </div>
      <div class="label">۲۰۴۸</div>
    </div>

    <!-- کارت به زودی -->
    <div class="card" id="card3" onclick="openPage('comingsoon','به‌زودی')">
      <div class="image-box">به‌زودی</div>
      <div class="label">به‌زودی</div>
    </div>
  </div>
</div>

<!-- صفحات داخلی -->
<div id="game2" class="page">
  <button class="fullscreen-btn" onclick="toggleFull('wrap2')">تمام صفحه</button>
  <div class="iframe-wrap" id="wrap2">
    <iframe src="https://pixelforge-ux.github.io/2048/" style="width:100%;height:100%;border:0;" allowfullscreen></iframe>
  </div>
  <div style="text-align:center"><a class="back" onclick="backMenu()">بازگشت</a></div>
</div>

<div id="comingsoon" class="page">
  <button class="fullscreen-btn" onclick="toggleFull('wrap3')">تمام صفحه</button>
  <div class="iframe-wrap" id="wrap3">
    <iframe srcdoc='
    <!DOCTYPE html><html lang="fa"><head><meta charset="UTF-8"><title>به زودی</title></head>
    <body style="margin:0; height:100vh; display:flex; justify-content:center; align-items:center; background: radial-gradient(circle at center, #1a1a1a 0%, #000 100%); font-family:sans-serif; overflow:hidden;">
    <h1 style="font-size:4rem;color:#fff;letter-spacing:6px;animation:glow 2s infinite alternate;">به‌زودی...</h1>
    <style>@keyframes glow{from{text-shadow:0 0 10px #ffbb33,0 0 20px #ff9800,0 0 30px #ffc107;}to{text-shadow:0 0 25px #ffd700,0 0 40px #ffa500,0 0 60px #ffeb3b;}}</style>
    </body></html>' style="width:100%;height:100%;border:0;" allowfullscreen></iframe>
  </div>
  <div style="text-align:center"><a class="back" onclick="backMenu()">بازگشت</a></div>
</div>

<!-- Popup 2048 -->
<div id="popup" style="
  position: fixed;
  inset: 0;
  display: none;
  backdrop-filter: blur(6px);
  background: rgba(0,0,0,0.55);
  justify-content: center;
  align-items: center;
  z-index: 999999;
">
  <div style="
    background: linear-gradient(145deg,#ffffff,#e9e9e9);
    padding: 28px 35px;
    border-radius: 18px;
    text-align: center;
    width: 80%;
    max-width: 360px;
    box-shadow: 0 12px 30px rgba(0,0,0,0.3);
    animation: pop 0.35s ease;
  ">
    <h2 style="margin:0 0 12px 0;color:#333;font-size:24px;font-weight:800;">
      محدودیت فعال شد
    </h2>
    <p style="font-size:17px;color:#444;margin:0 0 22px 0;">
      تا انتشار در ایتا صبر کنید
    </p>
    <button onclick="closePopup()" style="
      padding: 10px 22px;
      background:#2b6cb0;
      color:white;
      border:0;
      border-radius:10px;
      font-size:16px;
      cursor:pointer;
      font-weight:600;
      box-shadow:0 4px 10px rgba(0,0,0,0.2);
    ">باشه</button>
  </div>
</div>

<style>
@keyframes pop {from {transform:scale(.7); opacity:0;} to {transform:scale(1); opacity:1;}}
</style>

<script>
window.addEventListener('load',()=>{
  setTimeout(()=>{
    document.getElementById('splash').classList.add('hidden');
    const cards=document.querySelectorAll('.card');
    cards.forEach((c,i)=>{
      setTimeout(()=>{c.classList.add('show');}, i*200);
    });
  },2500);
});

function openPage(id, title){
  document.getElementById('menu').classList.remove('active');
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  document.getElementById('pagetitle').textContent = title;
  window.scrollTo({top:0,behavior:'smooth'});
}

function backMenu(){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.getElementById('menu').classList.add('active');
  document.getElementById('pagetitle').textContent = 'منوی بازی‌ها';
  window.scrollTo({top:0,behavior:'smooth'});
}

function toggleFull(id){
  const elem = document.getElementById(id);
  if (!document.fullscreenElement) {
    elem.requestFullscreen().catch(err=>alert("فول‌اسکرین پشتیبانی نمی‌شود!"));
  } else {
    document.exitFullscreen();
  }
}

// --------------- 2048 timer & popup ---------------
function handle2048(){
    let locked = localStorage.getItem("2048_locked");
    let start = localStorage.getItem("2048_start");

    if(locked === "1"){
        showPopup();
        return;
    }

    if(!start){
        localStorage.setItem("2048_start", Date.now());
        openPage('game2','2048');
        return;
    }

    let passed = (Date.now() - Number(start)) / 1000; // seconds
    if(passed >= 300){  // 5 minutes
        localStorage.setItem("2048_locked", "1");
        showPopup();
    } else {
        openPage('game2','2048');
    }
}

function showPopup(){
    document.getElementById("popup").style.display = "flex";
}

function closePopup(){
    document.getElementById("popup").style.display = "none";
}
</script>
</body>
</html>